<Page x:Class="darks.Windows.MapPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Map" Loaded="Page_Loaded">
    
    <Page.Resources>
        <!-- Page Entrance Animation -->
        <Storyboard x:Key="PageEntranceAnimation">
            <DoubleAnimation Storyboard.TargetName="PageContent"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1"
                             Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- Legend Item Style -->
        <Style x:Key="LegendItem" TargetType="StackPanel">
            <Setter Property="Orientation" Value="Horizontal"/>
            <Setter Property="Margin" Value="0,0,24,0"/>
        </Style>
    </Page.Resources>

    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <BeginStoryboard Storyboard="{StaticResource PageEntranceAnimation}"/>
        </EventTrigger>
    </Page.Triggers>

    <Grid x:Name="PageContent" Opacity="0" Margin="16,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Section -->
        <Grid Margin="0,0,16,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel>
                <TextBlock Text="Карта склада" 
                           FontSize="28" 
                           FontWeight="Bold" 
                           Foreground="#1E293B"
                           Margin="0,0,0,8"/>
                <TextBlock Text="Интерактивная схема расположения товаров" 
                           FontSize="14" 
                           Foreground="#64748B"/>
            </StackPanel>
            
            <!-- Legend Card -->
            <Border Grid.Column="1" 
                    HorizontalAlignment="Right"
                    Background="White"
                    CornerRadius="14"
                    Padding="20,14">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="3" Opacity="0.06"/>
                </Border.Effect>
                <StackPanel Orientation="Horizontal">
                    <!-- In Stock -->
                    <StackPanel Style="{StaticResource LegendItem}">
                        <Border Width="20" Height="20" CornerRadius="6" Margin="0,0,10,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#10B981" Offset="0"/>
                                    <GradientStop Color="#059669" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                        <TextBlock Text="В наличии" 
                                   VerticalAlignment="Center" 
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#1E293B"/>
                    </StackPanel>
                    
                    <!-- Low Stock -->
                    <StackPanel Style="{StaticResource LegendItem}">
                        <Border Width="20" Height="20" CornerRadius="6" Margin="0,0,10,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#EF4444" Offset="0"/>
                                    <GradientStop Color="#DC2626" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                        <TextBlock Text="Мало (&lt;10)" 
                                   VerticalAlignment="Center" 
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#1E293B"/>
                    </StackPanel>
                    
                    <!-- Empty -->
                    <StackPanel Orientation="Horizontal">
                        <Border Width="20" Height="20" CornerRadius="6" Margin="0,0,10,0"
                                Background="#E2E8F0"/>
                        <TextBlock Text="Пусто" 
                                   VerticalAlignment="Center" 
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#1E293B"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Warehouse Map Container -->
        <Border Grid.Row="1" 
                Margin="0,0,16,16"
                CornerRadius="24"
                ClipToBounds="True">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#1E293B" Offset="0"/>
                    <GradientStop Color="#334155" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="30" ShadowDepth="8" Opacity="0.15"/>
            </Border.Effect>
            
            <Grid>
                <!-- Tech Pattern Background -->
                <Canvas IsHitTestVisible="False" Opacity="0.1">
                    <!-- Grid Lines -->
                    <Line X1="0" Y1="50" X2="2000" Y2="50" Stroke="White" StrokeThickness="1"/>
                    <Line X1="0" Y1="100" X2="2000" Y2="100" Stroke="White" StrokeThickness="1"/>
                    <Line X1="0" Y1="150" X2="2000" Y2="150" Stroke="White" StrokeThickness="1"/>
                    <Line X1="0" Y1="200" X2="2000" Y2="200" Stroke="White" StrokeThickness="1"/>
                    <Line X1="50" Y1="0" X2="50" Y2="2000" Stroke="White" StrokeThickness="1"/>
                    <Line X1="100" Y1="0" X2="100" Y2="2000" Stroke="White" StrokeThickness="1"/>
                    <Line X1="150" Y1="0" X2="150" Y2="2000" Stroke="White" StrokeThickness="1"/>
                    <Line X1="200" Y1="0" X2="200" Y2="2000" Stroke="White" StrokeThickness="1"/>
                </Canvas>
                
                <!-- Header Bar -->
                <Border VerticalAlignment="Top" 
                        HorizontalAlignment="Stretch"
                        Padding="24,16">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#1E293B" Offset="0"/>
                            <GradientStop Color="Transparent" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <StackPanel Orientation="Horizontal">
                        <Border Background="#4F46E5" CornerRadius="8" Padding="12,6" Margin="0,0,16,0">
                            <TextBlock Text="📍 СКЛАД ГЛАВНЫЙ" 
                                       Foreground="White" 
                                       FontSize="12" 
                                       FontWeight="Bold"/>
                        </Border>
                        <TextBlock Text="Секции A1-E10" 
                                   Foreground="#94A3B8" 
                                   FontSize="13"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- Map Grid Container -->
                <Border Margin="24" 
                        Padding="16"
                        CornerRadius="16">
                    <Border.Background>
                        <SolidColorBrush Color="White" Opacity="0.05"/>
                    </Border.Background>
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" 
                                  VerticalScrollBarVisibility="Auto">
                        <UniformGrid x:Name="WarehouseGrid" 
                                     Rows="5" 
                                     Columns="10" 
                                     Background="Transparent"/>
                    </ScrollViewer>
                </Border>
                
                <!-- Corner Decorations -->
                <Border HorizontalAlignment="Left" 
                        VerticalAlignment="Bottom" 
                        Margin="16"
                        Background="#4F46E5" 
                        CornerRadius="8" 
                        Padding="14,10"
                        Opacity="0.9">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⚡" FontSize="14" Margin="0,0,8,0"/>
                        <TextBlock Text="Обновлено в реальном времени" 
                                   Foreground="White" 
                                   FontSize="11"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Page>
