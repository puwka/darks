<Page x:Class="darks.Windows.OrdersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Orders" Loaded="Page_Loaded">

    <Page.Resources>
        <!-- Page Entrance Animation -->
        <Storyboard x:Key="PageEntranceAnimation">
            <DoubleAnimation Storyboard.TargetName="PageContent"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1"
                             Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        
        <!-- DataGrid Column Header Style -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#94A3B8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="16,14"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#F1F5F9"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridColumnHeader">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <TextBlock Text="{TemplateBinding Content}" 
                                       FontWeight="{TemplateBinding FontWeight}"
                                       FontSize="{TemplateBinding FontSize}"
                                       Foreground="{TemplateBinding Foreground}"
                                       VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid Cell Style -->
        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="16,14"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#1E293B"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}" 
                                Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Foreground" Value="#1E293B"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- DataGrid Row Style -->
        <Style TargetType="DataGridRow">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="MinHeight" Value="56"/>
            <Setter Property="Margin" Value="0,2"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F8FAFC"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#EEF2FF"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- Filter Button Style -->
        <Style x:Key="FilterBtn" TargetType="Button">
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="FilterBorder"
                                Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="FilterBorder" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="Black" BlurRadius="12" ShadowDepth="3" Opacity="0.15"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Step Circle Style -->
        <Style x:Key="StepCircle" TargetType="Border">
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="CornerRadius" Value="22"/>
            <Setter Property="Background" Value="#E2E8F0"/>
        </Style>
        
        <!-- Active Step Style -->
        <Style x:Key="StepCircleActive" TargetType="Border" BasedOn="{StaticResource StepCircle}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#4F46E5" Offset="0"/>
                        <GradientStop Color="#7C3AED" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#4F46E5" BlurRadius="12" ShadowDepth="2" Opacity="0.4"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <BeginStoryboard Storyboard="{StaticResource PageEntranceAnimation}"/>
        </EventTrigger>
    </Page.Triggers>

    <Grid x:Name="PageContent" Background="#F4F7FC" Opacity="0" Margin="16,0,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ═══════════════════════════════════════════════════════════════════════════════ -->
        <!-- LEFT PANEL - Orders List                                                          -->
        <!-- ═══════════════════════════════════════════════════════════════════════════════ -->
        <Grid Grid.Column="0" Margin="0,0,16,16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Page Title -->
            <TextBlock Text="Заказы" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="#1E293B"
                       Margin="4,0,0,20"/>

            <!-- Search & Filters -->
            <StackPanel Grid.Row="1" Margin="0,0,0,16">
                <!-- Search Box -->
                <Border Background="White" 
                        CornerRadius="14" 
                        Height="48"
                        Margin="0,0,0,14">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="3" Opacity="0.06"/>
                    </Border.Effect>
                    <Grid>
                        <TextBox x:Name="TxtSearch" 
                                 BorderThickness="0" 
                                 Background="Transparent" 
                                 VerticalContentAlignment="Center" 
                                 Margin="48,0,16,0"
                                 FontSize="14"
                                 Foreground="#1E293B"
                                 TextChanged="TxtSearch_TextChanged" 
                                 Tag="Поиск по ID..."/>
                        <TextBlock Text="🔍" 
                                   FontSize="16"
                                   Foreground="#94A3B8"
                                   HorizontalAlignment="Left" 
                                   VerticalAlignment="Center" 
                                   Margin="18,0,0,0"
                                   IsHitTestVisible="False"/>
                    </Grid>
                </Border>

                <!-- Filter Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button Content="Все" 
                            Style="{StaticResource FilterBtn}" 
                            Margin="0,0,8,0" 
                            Click="Filter_Click" 
                            Tag="all">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#64748B" Offset="0"/>
                                <GradientStop Color="#475569" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Button Content="Новые" 
                            Style="{StaticResource FilterBtn}" 
                            Margin="0,0,8,0" 
                            Click="Filter_Click" 
                            Tag="new">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F59E0B" Offset="0"/>
                                <GradientStop Color="#D97706" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Button Content="В работе" 
                            Style="{StaticResource FilterBtn}" 
                            Margin="0,0,8,0" 
                            Click="Filter_Click" 
                            Tag="picking">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F97316" Offset="0"/>
                                <GradientStop Color="#EA580C" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Button Content="Готовы" 
                            Style="{StaticResource FilterBtn}" 
                            Click="Filter_Click" 
                            Tag="ready">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#10B981" Offset="0"/>
                                <GradientStop Color="#059669" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                </StackPanel>
            </StackPanel>

            <!-- Orders List -->
            <ListView x:Name="ListOrders" 
                      Grid.Row="2" 
                      BorderThickness="0" 
                      Background="Transparent" 
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                      SelectionChanged="ListOrders_SelectionChanged" 
                      Padding="0">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        <Setter Property="Margin" Value="0,0,0,12"/>
                        <Setter Property="Padding" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListViewItem">
                                    <Border x:Name="Bd" 
                                            Background="White" 
                                            CornerRadius="16" 
                                            Padding="20" 
                                            Cursor="Hand" 
                                            BorderThickness="2" 
                                            BorderBrush="Transparent"
                                            RenderTransformOrigin="0.5,0.5">
                                        <Border.RenderTransform>
                                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                                        </Border.RenderTransform>
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="15" 
                                                              Opacity="0.06" 
                                                              ShadowDepth="4" 
                                                              Direction="270"/>
                                        </Border.Effect>
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Bd" Property="BorderBrush" Value="#4F46E5"/>
                                            <Setter TargetName="Bd" Property="Background" Value="#FAFAFF"/>
                                            <Setter TargetName="Bd" Property="Effect">
                                                <Setter.Value>
                                                    <DropShadowEffect Color="#4F46E5" BlurRadius="20" Opacity="0.15" ShadowDepth="4"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="RenderTransform">
                                                <Setter.Value>
                                                    <ScaleTransform ScaleX="1.01" ScaleY="1.01"/>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter TargetName="Bd" Property="Effect">
                                                <Setter.Value>
                                                    <DropShadowEffect BlurRadius="20" Opacity="0.1" ShadowDepth="6"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Id, StringFormat='#{0}'}" 
                                               FontWeight="Bold" 
                                               FontSize="18" 
                                               Foreground="#1E293B"/>
                                    <Border Background="{Binding StatusColor}" 
                                            CornerRadius="8" 
                                            Margin="12,0,0,0" 
                                            Padding="10,4" 
                                            VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Status}" 
                                                   Foreground="White" 
                                                   FontSize="11" 
                                                   FontWeight="Bold"/>
                                    </Border>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <TextBlock Text="📅" FontSize="12" Margin="0,0,6,0" Opacity="0.6"/>
                                    <TextBlock Text="{Binding CreatedAt, StringFormat='dd MMM, HH:mm'}" 
                                               Foreground="#64748B" 
                                               FontSize="13"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                    <TextBlock Text="👤" FontSize="12" Margin="0,0,6,0" Opacity="0.6"/>
                                    <TextBlock Text="{Binding EmployeeName}" 
                                               Foreground="#94A3B8" 
                                               FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center">
                                <TextBlock Text="{Binding TotalPrice, StringFormat='{}{0:N0} ₽'}" 
                                           FontWeight="Bold" 
                                           FontSize="20" 
                                           Foreground="#1E293B" 
                                           HorizontalAlignment="Right"/>
                                <Border Background="#F1F5F9" CornerRadius="6" Padding="8,3" Margin="0,6,0,0">
                                    <TextBlock Text="{Binding ItemsCount, StringFormat='{}{0} поз.'}" 
                                               Foreground="#64748B" 
                                               FontSize="11"
                                               FontWeight="SemiBold"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <!-- ═══════════════════════════════════════════════════════════════════════════════ -->
        <!-- RIGHT PANEL - Order Details                                                       -->
        <!-- ═══════════════════════════════════════════════════════════════════════════════ -->
        <Border Grid.Column="1" 
                Background="White" 
                CornerRadius="24,0,0,24" 
                Margin="0,0,0,16"
                Padding="36">
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="30" ShadowDepth="8" Opacity="0.06"/>
            </Border.Effect>

            <Grid>
                <!-- Order Details Panel -->
                <Grid x:Name="DetailsPanel" Visibility="Hidden">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <Grid Margin="0,0,0,24">
                        <StackPanel>
                            <TextBlock Text="Детали заказа" 
                                       Foreground="#94A3B8" 
                                       FontSize="13" 
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtOrderId" 
                                       Text="Заказ #..." 
                                       FontSize="36" 
                                       FontWeight="Bold" 
                                       Foreground="#1E293B"/>
                        </StackPanel>
                        <StackPanel HorizontalAlignment="Right" VerticalAlignment="Top">
                            <TextBlock Text="Сумма заказа" 
                                       Foreground="#94A3B8" 
                                       FontSize="12"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,0,4"/>
                            <TextBlock x:Name="TxtOrderTotal" 
                                       Text="0 ₽" 
                                       FontSize="32" 
                                       FontWeight="Bold" 
                                       Foreground="#10B981"
                                       HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Grid>

                    <!-- Status Stepper -->
                    <Border Grid.Row="1" 
                            Margin="0,8,0,32" 
                            CornerRadius="20" 
                            Padding="28,24">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#F8FAFC" Offset="0"/>
                                <GradientStop Color="#F1F5F9" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Connecting Lines -->
                            <Rectangle x:Name="Line1" 
                                       Grid.Column="1" 
                                       Height="3" 
                                       Fill="#E2E8F0" 
                                       VerticalAlignment="Center" 
                                       Margin="8,0"
                                       RadiusX="1.5"
                                       RadiusY="1.5"/>
                            <Rectangle x:Name="Line2" 
                                       Grid.Column="3" 
                                       Height="3" 
                                       Fill="#E2E8F0" 
                                       VerticalAlignment="Center" 
                                       Margin="8,0"
                                       RadiusX="1.5"
                                       RadiusY="1.5"/>
                            <Rectangle x:Name="Line3" 
                                       Grid.Column="5" 
                                       Height="3" 
                                       Fill="#E2E8F0" 
                                       VerticalAlignment="Center" 
                                       Margin="8,0"
                                       RadiusX="1.5"
                                       RadiusY="1.5"/>

                            <!-- Step 1: New -->
                            <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                                <Border x:Name="StepNew" 
                                        Style="{StaticResource StepCircle}">
                                    <TextBlock Text="1" 
                                               Foreground="White" 
                                               FontWeight="Bold" 
                                               FontSize="16"
                                               VerticalAlignment="Center" 
                                               HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Новый" 
                                           FontSize="12" 
                                           FontWeight="SemiBold"
                                           Margin="0,10,0,0" 
                                           HorizontalAlignment="Center" 
                                           Foreground="#64748B"/>
                            </StackPanel>

                            <!-- Step 2: Picking -->
                            <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                                <Border x:Name="StepPick" 
                                        Style="{StaticResource StepCircle}">
                                    <TextBlock Text="📦" 
                                               FontSize="18"
                                               VerticalAlignment="Center" 
                                               HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Сборка" 
                                           FontSize="12" 
                                           FontWeight="SemiBold"
                                           Margin="0,10,0,0" 
                                           HorizontalAlignment="Center" 
                                           Foreground="#64748B"/>
                            </StackPanel>

                            <!-- Step 3: Ready -->
                            <StackPanel Grid.Column="4" HorizontalAlignment="Center">
                                <Border x:Name="StepReady" 
                                        Style="{StaticResource StepCircle}">
                                    <TextBlock Text="✔" 
                                               Foreground="White"
                                               FontWeight="Bold"
                                               FontSize="18"
                                               VerticalAlignment="Center" 
                                               HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Готов" 
                                           FontSize="12" 
                                           FontWeight="SemiBold"
                                           Margin="0,10,0,0" 
                                           HorizontalAlignment="Center" 
                                           Foreground="#64748B"/>
                            </StackPanel>

                            <!-- Step 4: Done -->
                            <StackPanel Grid.Column="6" HorizontalAlignment="Center">
                                <Border x:Name="StepDone" 
                                        Style="{StaticResource StepCircle}">
                                    <TextBlock Text="👋" 
                                               FontSize="18"
                                               VerticalAlignment="Center" 
                                               HorizontalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Выдан" 
                                           FontSize="12" 
                                           FontWeight="SemiBold"
                                           Margin="0,10,0,0" 
                                           HorizontalAlignment="Center" 
                                           Foreground="#64748B"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Items DataGrid -->
                    <Border Grid.Row="2" 
                            Background="#FAFBFC" 
                            CornerRadius="16" 
                            Padding="8">
                        <DataGrid x:Name="GridItems" 
                                  AutoGenerateColumns="False" 
                                  CanUserAddRows="False" 
                                  IsReadOnly="True" 
                                  GridLinesVisibility="None" 
                                  HeadersVisibility="Column" 
                                  BorderThickness="0" 
                                  Background="Transparent" 
                                  RowHeaderWidth="0"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ТОВАР" Binding="{Binding Name}" Width="*"/>
                                <DataGridTextColumn Header="ЦЕНА" Binding="{Binding Price, StringFormat='{}{0:N0} ₽'}" Width="100"/>
                                <DataGridTextColumn Header="КОЛ-ВО" Binding="{Binding Stock}" Width="80"/>
                                <DataGridTextColumn Header="СУММА" Binding="{Binding Total, StringFormat='{}{0:N0} ₽'}" Width="100">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Foreground" Value="#1E293B"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <!-- Bottom Actions -->
                    <StackPanel Grid.Row="3" Margin="0,24,0,0">
                        <!-- Note Section -->
                        <TextBlock Text="Заметка сотрудника" 
                                   FontWeight="SemiBold" 
                                   FontSize="13" 
                                   Margin="0,0,0,10" 
                                   Foreground="#64748B"/>
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="TxtNote" 
                                     Height="48"/>
                            <Button Grid.Column="1" 
                                    Content="Сохранить" 
                                    Style="{StaticResource ModernBtn}" 
                                    Background="#475569"
                                    Padding="24,14"
                                    Margin="12,0,0,0" 
                                    Click="BtnSendNote_Click"/>
                        </Grid>

                        <!-- Action Button -->
                        <Button x:Name="BtnAction" 
                                Height="60" 
                                Content="Начать сборку" 
                                FontSize="16" 
                                FontWeight="Bold"
                                Cursor="Hand"
                                Click="BtnAction_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="ActionBorder"
                                            CornerRadius="16"
                                            Height="{TemplateBinding Height}">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#10B981" Offset="0"/>
                                                <GradientStop Color="#059669" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <Border.Effect>
                                            <DropShadowEffect Color="#10B981" BlurRadius="20" ShadowDepth="6" Opacity="0.35"/>
                                        </Border.Effect>
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                          VerticalAlignment="Center"
                                                          TextBlock.Foreground="White"
                                                          TextBlock.FontWeight="Bold"
                                                          TextBlock.FontSize="16"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="ActionBorder" Property="Effect">
                                                <Setter.Value>
                                                    <DropShadowEffect Color="#10B981" BlurRadius="30" ShadowDepth="8" Opacity="0.45"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Print Button -->
                        <Button Content="🖨️ Распечатать этикетку" 
                                Margin="0,16,0,0" 
                                Background="Transparent" 
                                BorderThickness="0"
                                Foreground="#64748B" 
                                FontSize="13"
                                Click="BtnPrint_Click" 
                                Cursor="Hand" 
                                HorizontalAlignment="Center">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Foreground" Value="#4F46E5"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Grid>

                <!-- Placeholder when no order selected -->
                <StackPanel x:Name="TxtPlaceholder" 
                            HorizontalAlignment="Center" 
                            VerticalAlignment="Center">
                    <Border Background="#F1F5F9" 
                            CornerRadius="24" 
                            Width="100" 
                            Height="100"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,20">
                        <TextBlock Text="📦" 
                                   FontSize="44" 
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Выберите заказ для просмотра" 
                               FontSize="18"
                               FontWeight="SemiBold"
                               Foreground="#94A3B8"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Детали заказа появятся здесь" 
                               FontSize="14"
                               Foreground="#CBD5E1"
                               HorizontalAlignment="Center"
                               Margin="0,8,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
